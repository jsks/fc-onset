---
title: "Frozen Civil Conflicts"
subtitle: "The Role of External State Support"
author: J.L.A. Krusell
date: today
linestretch: 1.25
bibliography: library.bib
format: pdf
execute:
    cache: true
    echo: false
    warning: false
abstract: |
    Frozen conflicts are among some of the most pernicious, difficult to
    resolve conflicts. Surprisingly, little scholarly attention has been
    paid to the factors influencing their emergence. This paper addresses
    one possible dimension, namely the effect of external state support to
    conflict actors on the probability of an ongoing civil conflict
    becoming frozen. I use an original dataset coding frozen conflicts as
    an outcome among UCDP civil conflict episodes from 1975 to 2019 in
    order to construct a series of bayesian, hierarchical probit models
    motivated by an application of bargaining theory to the domain of
    frozen conflicts. Results indicate that directed support to rebels in
    the absence of similar support to the government side increases the
    probability that a civil conflict episode terminates as a frozen
    conflict. All other treatment conditions --- specifically, directed
    support provided only to the government and directed supported given
    to both sides --- are found to be inconsequential. Taken together,
    these findings help provide a more nuanced understanding of conflict
    termination beyond the common assumption that conflicts either
    conclude through a negotiated settlement or a one-sided military
    victory. Furthermore, this paper also helps shed light on the
    conditions under which actors may prefer a sub-optimal solution,
    allowing a conflict to transition into a state of unstable peace with
    an ever present threat of violent re-escalation, rather than a
    conclusive termination.
---

[//]: # Setup R environment
```{r setup, include = F}
library(dplyr)
library(ggplot2)
library(ggthemes)
library(ggdist)
library(latex2exp)
library(knitr)
library(patchwork)
library(tidyr)

# Project specific utility package
library(fc.utils)

options(knitr.kable.NA = ".", knitr.kable.format = "latex",
        knitr.kable.linesep = "")

theme_set(theme_tufte(base_family = "TeX Gyre Pagella", base_size = 10))

design <- readRDS("./data/model_inputs/design.rds")
```

# Introduction

Frozen conflicts are among some of the most pernicious, difficult to
resolve conflicts. Surprisingly, little scholarly attention has been
paid to the factors influencing their emergence. This paper addresses

Frozen conflicts -> pernicious difficult to solve conflicts; long-running costs

- relatively little academic literature on why some conflicts

"Why do some conflicts become frozen?"

- focus on the class of intra-state frozen conflicts

- wide variety of potential factors
  -  I decide to focus on international dimensions, specifically external support
  - Justify by saying there exists a broad literatur eon the importance of external support on ocnlfict outcomes

- Skeleton for remaining article
  - First, I provide a brief overview of prev. literature
  - I then offer a theory of why external support may be linked to the onset of frozen civil conflicts. "In brief, etc etc"
  - Provide empirical evidence with original coding showing that support is positively linked with prob. of frozen conflict
    - H/o: only within the context of territorial civil conflicts

- Results contribute to our understanding of frozen conflitcs and conflict outcomes more broadly

frozen conflict - "a protracted state of affairs in which major hostilities have ended, but the enmity between the actors persists and re-escalation remains a permanent threat."

When conflicts freeze, large-scale hostilities cease, but the underlying issue(s) remain unresolved and there remains an ever-present threat of violent re-escalation.

# Literature Review

In contrast to the paucity of literature concerning frozen conflicts, there exists numerous studies examining the links between third party involvement on both the duration and outcome of civil conflicts [@shelton_what_2013]. Previous work has argued that external interventions by third party states increase the duration of civil conflicts [@regan_third-party_2002]. However, biased military interventions may be the exception and in some cases actually increase the probability of a favourable outcome for the supported conflict actor [@balch-lindsay_third-party_2008]. Although others have put forth empirical arguments that this only holds in the case of rebel biased interventions. More specifically, third party military interventions may decrease the duration of a conflict and increase the probability of either negotiated settlement or rebel military victory in part because interveners may only involve themselves in ongoing civil conflicts in favor of the government when the government is facing a relatively strong rebel group with a high level of military capabilities [@gent_going_2008]. The probability for a government military victory would on average be lower in these situations, thereby masking the effects of a government biased intervention. Indeed, when accounting for the differential effect of intervention given the strength of the opposition, there have been empirical claims that government biased interventions decrease the probability of a rebel victory and increase the probability of a government military victory [@sullivan_conditional_2015].

Additional work has sought to look at the relationships and preferences of supporting actors as well as the disaggregated types of external support. Third party states intervening or providing material support to opposing sides in a civil conflict for the purpose of balancing may increase conflict duration [@aydin_networks_2012; @anderson_competitive_2019].

disaggregate the types of external interventions that third party states may provide to conflict actors. This includes looking beyond military interventions with some scholars arguing that military aid and other forms of support, excluding direct military involvement, increase the likelihood of either a rebel victory or negotiated settlement [@jones_altering_2017]. Others argue that fungible support, *i.e.* financing and weapons, has an opposite impact by actually extending the duration of conflicts [@sawyer_role_2017].

# Theory




# Empirics

To empirically assess whether external state support for conflict actors affects the probability of a civil conflict episode terminating as a frozen conflict a series of bayesian probit models were run using original data on frozen civil conflicts. A mixed identification strategy was employed by both conditioning on relevant covariates and instrumenting external support with UN roll call votes.

In what follows, I will first present the model specification and results from a probit regression predicting the onset of a frozen conflict. I will then decrease the dependent and independent variables, including operationalizations and data sources.

## Probit Model

I model the onset of frozen civil conflicts using a hierarchical bayesian probit model. The unit of analysis is conflict episodes --- contiguous years of active fighting according  to the UCDP definition of armed conflict as a "contested incompatibility that concerns a government and/or territory where the use of armed forced between two parties, of which at least one is the government of a state, results in at least 25 battle-related deaths within a calendar year" [@gleditsch_armed_2002; @davies_organized_2023]. The outcome, $y_i \in \{0, 1\}$ for $i = 1, 2, \ldots, N$ episodes, is a binary indicator denoting whether a given episode terminates in a frozen state modeled as a function of a matrix of treatment variables, $T$, and a set of additional control covariates, $X$, such that

\begin{align*}
y_i | \pi_i & \sim \text{Bernoulli}(\pi_i) \\
\pi_i & = \Phi\left(\alpha + X_i' \beta + T_i' \delta_{k_i} + \gamma_{c_i}\right)
\end{align*}

where $\Phi(\cdot)$ is the standard normal cumulative density function. Then, $\delta_k$ is the group specific vector of treatment effects. I allow the treatment effects to vary according to whether the underlying incompatibility for the given conflict episode concerns territory or control of the central government in order to account for potential differential effects, thus $\delta \in \mathbb{R}^{D \times K}$ for $D$ treatment variables. Finally, $\gamma_c$ represents a varying intercept for each country in order to capture unmodeled time invariant heterogeneity between countries.

In the case of the global intercept and slope coefficients for the control variables, $X$, I select fairly conservative, weakly informative priors given the restricted sample size and moderate number of predictors. Specifically, I set $\alpha \sim \text{N}(0, 5)$ and $\beta \sim \text{N}(0, 1)$ to improve sampling efficiency by placing less prior probability density on unlikely large values on the probit scale and to provide a degree of regularization.

For $\delta_k$ and $\gamma$ I use hierarchical priors that allow for varying effects while partially pooling information across groups to prevent overfitting. Regarding the latter, this means $\delta_{jk} \sim \text{N}(\mu_j, \tau_j)$ for $j = 1, 2, \ldots, D$ where $\mu_j \sim \text{N}(0, 1)$ and $\tau_j \sim \text{N}(0, 2.5)$. And for the former, $\gamma_c \sim \text{N}(0, \sigma)$ and $\sigma \sim \text{N}(0, 1)$. The particularly restrictive hyperprior on $\sigma$ shrinks the posterior $\gamma$ estimates towards zero and encodes a significant degree of skepticism towards country-specific deviations.[^country-intercepts]

[^country-intercepts]: The risk for overfitting is especially high for the country-specific intercepts since the number of observations per country is relatively small with the median country only experiencing two episodes within the time period under study.

Due to the non-linear nature of a probit regression model, in order to interpret the estimated association between the treatments and outcome, the target empirical estimands are the group-specific average marginal effects, *i.e.* the changes in the conditional expectation of the outcome variable given the various treatment states versus the baseline control averaged over the relevant subgroup sample.[^mem] Let $\theta$ denote the vector of all unknown parameters in the regression model, then the average marginal effect (AME) for the $j^{th}$ treatment state represented by vector $w_j$ for subsample $k$ can be approximated using $m = 1, 2, \ldots, M$ posterior draws from $p(\theta | y, X, T)$ such that

\begin{align*}
\text{AME}_{jk}^{(m)} = \frac{1}{N_k} \sum_{i \in S_k} P\left(y_i = 1 | T = w_j, X_i, \theta^{(m)}\right) - P\left(y_i = 1 | T = 0_{D}, X_i, \theta^{(m)}\right)
\end{align*}

[^mem]: An alternative approach would be to calculate the differences in the predicted probability for each treatment effect while holding the remaining covariates constant at their mean and/or mode. However, this would not necessarily be representative of the "typical case" in the population [@hanmer_behind_2013]. Although there is a minimal amount of non-stochastic missingness in the data I employ due to differing coding coverage between datasets resulting in dropped conflict episodes, I would argue that the sample averaged marginal effects are still more representative of each treatment would affect the typical civil conflict.

## Data

### Measuring Frozen Conflicts

The outcome variable in my regression model is a binary indicator for whether a civil conflict terminates in a frozen state. Following the definition of frozen conflicts offered earlier, I construct this measure using a mix of automated and manual coding of intrastate and internationalized intrastate conflict terminations taken from the UCDP Conflict Termination Dataset [@kreutz_how_2010].[^protocol] Episodes were considered terminated if the total number of battle related fatalities dropped below 25 within a year. I subsequently labeled a termination as a frozen conflict if three criteria were satisfied. First, an episode could not result in a one-sided military victory. This would constitute a conclusive termination allowing the victor to set the terms of the post-conflict order. Second, the episode could not conclude with a comprehensive peace agreement that addresses the underlying core issue according to the UCDP Peace Agreement Dataset [@pettersson_organized_2019].[^partial] To account for the possibility of a failed peace agreement I further required that the comprehensive peace agreement had to last for at least one calendar year in order to disqualify an episode termination as a frozen conflict.[^strict_frozen] Finally, an episode could not result in actor death since this is a minimum necessary condition for a conflict to become frozen. For a state actor this meant that although there could be a turnover in the regime, the state could not cease to exist as a sovereign entity following the conclusion of the conflict episode. For non-state actors this entailed a continued existence for at least five years post-conflict without renouncing political violence and/or a re-escalation of violence into a new conflict episode within the same time period. This was done to exclude situations where rebel groups unilaterally renounce violence as a political strategy and either disband or transition into political parties or civil society organizations.

[^protocol]: For a detailed description of the codcing procedure see the protocol document in the supplemental materials.

[^partial]: Note, this does not exclude tha possibility that frozen conflicts can arise following a partial peace agreement or ceasefire. For example, the First Nagorno-Karabkh War was terminated with the 1994 Bishkek Protocol establishing a general ceasefire; however, the agreement failed to address the status of Nagorno-Karabakh leading to a frozen conflict with periodic re-escalations until the forcible reintegration of the territory by Azerbaijan following the 2023 offensive.

[^strict_frozen]: In the appendix I extend the analysis presented in this paper and run a series of robustness checks where I increase the number of years required for a compehensive peace agreement to be in place in order to better distingiush between frozen conflicts and short-term pauses in fighting.


```{r}
dataset <- readRDS("./data/merged_data.rds")
n_frozen <- filter(dataset, frozen == 1) |> nrow()
n_terr_frozen <- filter(dataset, frozen == 1, incompatibility == 1) |> nrow()
```


In total, `r n_frozen` frozen conflicts were identified out of `r nrow(dataset)` civil conflict terminations, comprising approximately `r sprintf("%.0f", 100 * n_frozen / nrow(dataset))` percent of all observations for the period 1975 to 2017. Of the frozen conflicts, `r n_terr_frozen` were conflicts where the central incompatibility between conflict actors concerned territory rather than control of the central government. @fig-frozen shows both a world map of the countries that have experienced at least one frozen conflict within the coded time period as well as the incidence rate of frozen conflicts per year.


```{r}
#| fig-height: 2
#| label: fig-frozen
#| fig-cap: |
#|    On the left, a world map showing the geographic distribution of
#|    countries that have experienced at least one frozen conflict
#|    highlighted in blue. On the right, the incidence rate of new
#|    frozen conflicts per year.

frozen <- filter(dataset, frozen == 1) |>
    mutate(country = sub("Government of ", "", side_a),
           country = case_when(country == "Russia (Soviet Union)" ~ "Russia",
                               country == "United Kingdom" ~ "UK",
                               country == "Congo" ~ "Republic of Congo",
                               country == "Myanmar (Burma)" ~ "Myanmar",
                               country == "Bosnia-Herzegovina" ~ "Bosnia and Herzegovina",
                               country == "Serbia (Yugoslavia)" ~ "Serbia",
                               country == "DR Congo (Zaire)" ~ "Democratic Republic of the Congo",
                               T ~ country))

sub.df <- group_by(frozen, country) |> count(frozen)

world <- map_data("world") |>
    filter(region != "Antarctica") |>
    left_join(sub.df, by = c("region" = "country")) |>
    mutate(n = ifelse(is.na(n), 0, 1) |> as.factor())

p1 <- ggplot(world, aes(long, lat, map_id = region, fill = n, group = group)) +
    geom_map(map = world, color = "grey", size = 0.25) +
    scale_fill_manual(values = c("0" = "#CFCFC4", "1" = "#268bd2"), guide = F) +
    theme(legend.position = "none",
          axis.title.x = element_blank(),
          axis.title.y = element_blank(),
          axis.ticks = element_blank(),
          axis.text = element_blank())

p2 <- filter(dataset, frozen == 1) |>
    ggplot(aes(year)) +
    geom_bar() +
    theme(axis.title.x = element_blank()) +
    ylab("Frozen Onsets")

p1 + p2

```


Compared to the only other extant coding of frozen conflicts, the Frozen Conflict Dataset (FCD) [@klosek_frozen_2021], the measure that I employ features a more expansive operationalization of the concept of frozen conflicts. Although the FCD covers a wider period from 1946 until 2011, only civil conflicts involving *de facto* states according to the coding by @florea_facto_2014 are included resulting in 17 cases of frozen conflict. Furthermore, the termination year for a civil conflict episode in the FCD is coded as the last year in which the number of battle related deaths is above 500. In contrast, my measure looks beyond only *de facto* states and considers civil conflicts where the central incompatibility may center over control of the government. Furthermore, I follow the UCDP and employ a smaller battle related fatalities threshold thereby capturing lower intensity conflict episodes.[^insurgencies]

[^insurgencies]: There is a risk that including low-level conflict episodes risks conflating minor, long-running insurgencies with frozen conflicts. It can be argued that the former may persist at such a low level of activity with only sporadic, isolated incidences of limited violence as to not represent a meaningfully salient issue to the incumbent state and would therefore not constitute a frozen conflict. To mitigate this risk, I also run the analysis presented in this paper on a sub-sample of conflicts with a cumulative intensity of at least 1,000 battle related fatalities since onset.


### Treatments

The primary independent variables in the model are two binary treatment variables measuring respectively whether external support was provided at least once to either the rebel side or the government side at any time during a civil conflict episode by a third party state actor, as well as the interaction in order to account for a potential differential effect when both sides receive support. Data on external state support was drawn from the UCDP External Support Dataset (ESD) [@meier_external_2023] covering the period from 1975 to 2017 and included both fungible and non-fungible support across all support categories coded by the ESD. As detailed in the model specification, I allow the effect parameters to vary according to whether the underlying incompatibility concerns control of the government or territory resulting in two sets of treatment effects.

@fig-prop shows the total counts as well as proportion of observations that terminated as frozen conflicts for each corresponding treatment category: external support to only the government, external support to only the rebels, external support to both, and no external support received by either side. In general, a higher proportion of civil conflicts centered on a territorial incompatibility terminate as a frozen conflict when support is either given only to the rebels or to both sides.

```{r}
#| fig-height: 3
#| label: fig-prop
#| fig-cap: |
#|     Total counts and proportion of observations that terminated as
#|     frozen conflict per treatment category.

conditions <- dataset |>
    mutate(treatment = case_when(ext_sup_s_rebel_bin == 1 & ext_sup_s_state_bin == 1 ~ "Both",
                                 ext_sup_s_rebel_bin == 1 & ext_sup_s_state_bin == 0 ~ "Rebel",
                                 ext_sup_s_rebel_bin == 0 & ext_sup_s_state_bin == 1 ~ "Gov.",
                                 ext_sup_s_rebel_bin == 0 & ext_sup_s_state_bin == 0 ~ "None"),
           treatment = factor(treatment, levels = c("Gov.", "Rebel", "Both", "None")),
           Incompatibility = ifelse(incompatibility == 0, "Government",
                                    "Territory"))

p1 <- ggplot(conditions, aes(treatment, fill = Incompatibility)) +
    geom_bar(position = "dodge") +
    ylab("Total Count") +
    scale_fill_solarized()

condition_props <- group_by(conditions, treatment, Incompatibility) |>
    summarise(prop = mean(frozen == 1))

p2 <- ggplot(condition_props, aes(treatment, prop, fill = Incompatibility)) +
    geom_col(position = "dodge") +
    ylim(c(0, 1)) +
    ylab("Proportion Frozen") +
    scale_fill_solarized()

p1 + p2 + plot_layout(axis_title = "collect", guides = "collect") & xlab("External Support")

```

### Control Variables

In addition to the treatment variables I also include a set of covariates that could plausibly confound the relationship between external state support and frozen conflicts. This includes variables related to  conflict dynamics, specifically: conflict episode duration, episode recurrence within a conflict, and cumulative intensity. Conflicts which last longer may affect the willingness of third party actors to offer support to belligerents. Simultaneously, long-running conflicts may also be at a greater risk of becoming frozen since the protracted nature of the conflict indicates an inability for either side to achieve a one-sided victory or be willing to reach a compromise through a peace agreement. We could expect the costs to increase such that active fighting ceases; however, the underlying conflict remains unresolved and the conflict transitions to being frozen. Thus, I include the number of years for which each episodes lasts until termination transformed with the natural logarithm function in order to reflect the diminishing impact of each one unit increase. A similar logic may also apply to episode recurrence. Recurring episodes can also indicate an intractable long-running conflict that may affect both external support and the likelihood for a conflict to become frozen. Therefore, I include a binary indicator variable for whether an episode is a recurring episode within a larger conflict as identified by the UCDP. Finally, I also include a binary indicator for whether the cumulative number of battle related deaths has exceeded 1,000 since onset. High intensity conflicts would be indicative of a greater relative strength for the opposition and may be more likely to attract outside intervention both because of the potential destabilizing effects to international/regional security as well as the greater opportunity for third party state rivals to secure a favourable post-war outcome. Furthermore, a stronger opposition may also raise the probability that the conflict becomes frozen since the incumbent government may be less likely to win an outright victory.

In complement to the partially pooled varying treatment effects, I also include a binary indicator for whether the conflict incompatibility concerns territory in order to account for a potential differing baseline probability for termination as a frozen conflict and the possibility that the conflict incompatibility affects the likelihood of external support. Further, I include variables to control for the Cold War and ongoing inter/intra-state conflicts within the host country. The former is a binary indicator for whether the termination year falls before 1989 to capture temporal dynamics related to the propensity for different types of conflict terminations. For example, international norms concerning external intervention in civil conflicts may be shaped in part by the state of the international system influencing both the decision by third party actors to intervene in a civil conflict and the types of conflict terminations that external interveners seek [@howard_how_2017]. The latter are binary indicators as well measuring whether an interstate or intrastate conflict occurred at any time during the conflict episode. Third party states involved in one conflict may be more likely to also intervene in another ongoing conflict within the same country. Furthermore, multiple ongoing conflicts could also indicate a weakened incumbent government forced to face multiple opponents, which may in turn affect the probability that a conflict freezes. Lastly, I include a binary variable for whether a conflict is left censored, *i.e.*, that the onset of the episode occurred before the coding start for the dataset, since data on external support from the ESD is only available from 1975 until 2017.[^robust_censor]

[^robust_censor]: I also run multiple robustness checks in the appendix where I alternatively drop episodes with an episode onset year before the coding start for the dataset and/or recurrent episodes within conflicts that also began prior to 1975.

## Results

@fig-ame plots the average marginal effects from estimating the hierarchical probit model predicting frozen civil conflicts given the observed data on directed external support by third party states and the set of control variables detailed in the data section.[^stan] The average marginal effects capture the change in the predicted probability for the outcome given the three treatment conditions --- external support given only to the government, external support given only to the rebel(s), and external support given to both sides --- versus the baseline condition of no external support given to any conflict actor. The plots also depict the 50% and 90% credible intervals formed from the corresponding quantiles of the posterior draws with the point estimates representing the posterior medians.

[^stan]: The model is implemented in Stan, a probabilistic programming language, and estimated using Stan's No-U-Turn sampler via the `CmdStanR` interface [@stan_development_team_stan_2024; @gabry_cmdstanr_2024]. It was run with 4 parallel chains at 2,000 iterations each with a warmup of 1,000 with convergence assessed using the standard Stan diagnostics. All pre/post-processing was done using R `r sprintf("%s.%s", R.version$major, R.version$minor)` [@r_core_team_r_2023].

```{r}
#| label: fig-ame
#| fig-height: 3
#| fig-cap: |
#|     Posterior densities for the average marginal effects for the
#|     three treatment conditions varying by incompatibility type on
#|     the predicted probability of a
#|     frozen conflict onset versus the baseline with 50% and 90%
#|     credible intervals. Point estimates are the posterior medians.

main_model <- filter(design, outcome == "frozen", treatment == "bin", episodes == "all",
                     censored == "with_censored") |> pull(id)

fit <- sprintf("posteriors/%s/fit.rds", main_model) |>  readRDS()

ame <- fit$draws("ame", format = "df") |>
    select(matches("ame\\[[124]")) |>
    pivot_longer(everything(), names_to = "variable")

ll <- extract_digits(ame$variable)
ame$variable <- sprintf("ame[%s]", sapply(ll, `[`, 1))
ame$group <- ifelse(sapply(ll, `[`, 2) == 1, "Government Incompatibility",
                    "Territorial Incompatibility")

ame2 <- filter(ame, variable == "ame[2]", group == "Territorial Incompatibility")
ame4 <- filter(ame, variable == "ame[4]", group == "Territorial Incompatibility")

ggplot(ame, aes(x = value, y = variable, fill = variable)) +
    stat_eye(alpha = 0.8, show.legend = F, .width = c(0.5, 0.9)) +
    geom_vline(xintercept = 0, linetype = "dashed", alpha = 0.2) +
    labs(x = parse(text = "bold('AME '*Delta)"),
         y = "External Support") +
    scale_y_discrete(labels = c("ame[1]" = "Gov. Only",
                                "ame[2]" = "Rebel Only",
                                "ame[4]" = "Both")) +
    coord_flip() +
    facet_grid(. ~ group) +
    scale_fill_solarized()
```

From the results, it is clear that only in instances of territorial civil conflict where external support was provided to either both sides or to only the rebel(s) is there a substantive effect on the probability of an episode becoming a frozen conflict. In both cases, the effect is positive with respective probabilities `r mean(ame4$value > 0) |> signif(2)` and `r mean(ame2$value > 0) |> signif(2)`, and on average, each condition is associated with an approximately `r mean(ame2$value) |> signif(2)` increase in the predicted probability for a frozen conflict across the sample of territorial civil conflict episodes, albeit with a high degree of posterior uncertainty, $\text{CI}_{90\%}: [`r quantile(ame4$value, 0.05) |> signif(2)`, `r quantile(ame4$value, 0.95) |> signif(2)`]$ and $\text{CI}_{90\%}: [`r quantile(ame2$value, 0.05) |> signif(2)`, `r quantile(ame2$value, 0.95) |> signif(2)`]$.

```{r}
#| label: fig-delta
#| fig-height: 3
#| fig-cap: |
#|     Posterior densities as well as 50% and 90% credible intervals
#|     for the treatment parameters varying by incompatibility type in
#|     the hierarchical probit model predicting whether a civil
#|     conflict episodes terminates as a frozen conflict. Point
#|     estimates are the posterior medians.

delta <- fit$draws("delta", format = "df") |>
    select(matches("delta")) |>
    pivot_longer(everything(), names_to = "variable")

ll <- extract_digits(delta$variable)
delta$variable <- sprintf("delta[%s]", sapply(ll, `[`, 1))
delta$group <- ifelse(sapply(ll, `[`, 2) == 1, "Government Incompatibility",
                      "Territorial Incompatibility")

delta2 <- filter(delta, variable == "delta[2]", group == "Territorial Incompatibility")

ggplot(delta, aes(x = value, y = variable, fill = variable)) +
    stat_halfeye(alpha = 0.8, show.legend = F, .width = c(0.5, 0.9)) +
    geom_vline(xintercept = 0, linetype = "dashed", alpha = 0.2) +
    theme(axis.title.x = element_blank(),
          axis.title.y = element_blank()) +
    scale_y_discrete(labels = c("delta[1]" = "Ext. Sup. to Gov",
                                "delta[2]" = "Ext. Sup. to Rebel",
                                "delta[3]" = "Interaction")) +
    facet_grid(. ~ group) +
    scale_fill_solarized()
```

From the parameter plots in @fig-delta, the main driver for this substantive results is the estimate for external support given to the rebel(s) in the context of a territorial civil conflict. In this case, the probability for the treatment parameter being greater than zero is `r mean(delta2$value > 0) |> signif(2)` with $\text{CI}_{90\%}: [`r quantile(delta2$value, 0.05) |> signif(2)`, `r quantile(delta2$value, 0.95) |> signif(2)`]$. Taken together, these results indicate that the crucial predictor for whether an intra-state conflict terminates as a frozen conflict is whether the opposition received external support by a third party state during a conflict episode centered around a territorial incompatibility. Meanwhile, external support directed to the government is fairly uninformative as are all treatment effects under the condition of a government incompatibility. However, the posterior uncertainty remains high, which limits the degree to which the treatment effect can be substantively interpreted.

# Conclusion

The measurement of frozen conflicts provided herewithin is crude. Future work should focus on refining this measurement.

Potential shortcoming: what I am not doing is taking into account the preferences of external supporters and motivation for offering support. Nor am I distinguishing between different external support types.


\newpage

# References

::: {#refs}
:::

\newpage

# Appendix

## List of Frozen Conflicts

```{r}

filter(dataset, frozen == 1) |>
    arrange(side_a, year) |>
    select(Government = side_a, `Rebel Group(s)` = side_b, Year = year) |>
    mutate(Government = sub("Government of", "", Government) |> trimws()) |>
    kable(longtable = T)
```

\newpage

## Simulation Based Calibration

```{R}
sbc <- readRDS("./posteriors/sbc.rds") |>
    select(-.chain, -.iteration, -.draw)

# I really, really hate ggplot histograms
par(family = "TeX Gyre Pagella", mfrow = c(5, 5),
    mai = c(0.35, 0.2, 0.1, 0.2), mgp = c(1.75, 0.5, 0))
for (i in seq_along(sbc)) {
    # I also hate tibbles with every fiber of my being
    label <- colnames(sbc)[i] |> stanvar_latex()
    sbc[[i]] |> hist(main = "", xlab = TeX(label), ylab = "")
}
```

\newpage

## Robustness Checks

Different combinations of the following...

- Aggregation of the treatments: binary treatment, binary treatment in the last 5 years of the conflict episode, and proportional treatment. The latter is calculated as the proportion of conflict-years in an episode where one side received external support

- All conflict episodes and only high intensity episodes --- try to distinguish between low-level insurgencies and actual civil wars

- Normal definition for frozen conflicts and a strict definition that requires a duration of at least 2 years in order to exclude temporary one-year pauses in fighting that may be more the result of UCDP's coding decision rather than representing actual frozen conflict.


```{R}

models <- list.dirs("posteriors", recursive = F)
stopifnot(length(models) != 0)

fits <- lapply(models, \(dir) file.path(dir, "fit.rds") |> readRDS())
names(fits) <- basename(models)

model_ames <- lapply(names(fits), function(model) {
    fits[[model]]$summary("ame", pzero, posterior::quantile2, median) |>
                    mutate(id = sub("data_", "", model)) |>
                    filter(grepl("ame\\[[124]", variable))
}) |>
    bind_rows() |>
    left_join(design, by = "id")

# Assign the correct variable names/groups
ll <- extract_digits(model_ames$variable)
ame_keys <- sprintf("ame[%s]", sapply(ll, `[`, 1))

model_ames$variable <- case_when(ame_keys == "ame[1]" ~ "Ext. Sup. Gov Only",
                                 ame_keys == "ame[2]" ~ "Ext. Sup. Rebel Only",
                                 ame_keys == "ame[4]" ~ "Ext. Sup. to Both")
model_ames$group <- ifelse(sapply(ll, `[`, 2) == 1, "Government Incompatibility",
                           "Territorial Incompatibility")

ggplot(model_ames, aes(pzero, median)) +
    geom_point(alpha = 0.2) +
    geom_errorbar(aes(ymin = q5, ymax = q95), alpha = 0.25) +
    geom_hline(yintercept = 0, linetype = "dashed", alpha = 0.2) +
    facet_grid(variable ~ group) +
    labs(y = parse(text = "tilde(Delta)"), x = parse(text = "P(tilde(Delta) > 0)")) +
    theme(legend.position = "none")

```
